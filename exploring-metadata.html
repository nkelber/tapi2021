
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exploring Metadata and Pre-Processing &#8212; Teaching Text Analysis with Constellate</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      <img src="_static/constellate-beta.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Teaching Text Analysis with Constellate</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="book/intro.html">
   About
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  The Course
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="book/schedule.html">
   Course Schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="book/syllabus.html">
   Course Syllabus
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Open Educational Directory
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="book/all-notebooks.html">
   Open Notebook Lessons Directory
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="book/more-classes.html">
   Classes using Jupyter Book
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="book/add-my-lesson.html">
   Add your lesson or class
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Create your own Teaching Website
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="book/create-your-own.html">
   Create your own Jupyter Book
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="book/install-software.html">
   Installing software to modify your Book
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="book/configure-git.html">
   Clone your repository to your local machine
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="book/making-site-changes.html">
   Make local changes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="book/pushing-to-git.html">
   Push changes to the web
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Reference
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://constellate.org">
   Constellate Platform
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://docs.constellate.org/">
   Constellate Documentation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://docs.constellate.org/key-terms/">
   Text Analysis Glossary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://jupyterbook.org/intro.html">
   Jupyter Book Documentation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="book/keep-learning.html">
   More ways to keep learning
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/exploring-metadata.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/ithaka/tdm-notebooks"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/ithaka/tdm-notebooks/issues/new?title=Issue%20on%20page%20%2Fexploring-metadata.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/ithaka/tdm-notebooks/edit/master/exploring-metadata.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://binder.constellate.org/v2/gh/ithaka/tdm-notebooks/master?urlpath=tree/exploring-metadata.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#import-your-dataset">
   Import your dataset
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#filtering-out-columns-using-pandas">
   Filtering out columns using Pandas
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#filtering-out-rows-with-pandas">
   Filtering out rows with Pandas
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#remove-all-rows-without-data-for-a-particular-column">
     Remove all rows without data for a particular column
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#remove-row-based-on-the-content-of-a-particular-column">
     Remove row based on the content of a particular column
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#saving-a-list-of-ids-to-a-csv-file">
   Saving a list of IDs to a CSV file
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualizing-the-pre-processed-data">
   Visualizing the Pre-Processed Data
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <p><img alt="CC BY license logo" class="align-left" src="https://ithaka-labs.s3.amazonaws.com/static-files/images/tdm/tdmdocs/CC_BY.png" /><br /><br />
Created by <a class="reference external" href="http://nkelber.com">Nathan Kelber</a> and Ted Lawless for <a class="reference external" href="https://labs.jstor.org/">JSTOR Labs</a> under <a class="reference external" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons CC BY License</a><br />
<strong>For questions/comments/improvements, email <a class="reference external" href="mailto:nathan&#46;kelber&#37;&#52;&#48;ithaka&#46;org">nathan<span>&#46;</span>kelber<span>&#64;</span>ithaka<span>&#46;</span>org</a>.</strong><br /></p>
<hr class="docutils" />
<div class="section" id="exploring-metadata-and-pre-processing">
<h1>Exploring Metadata and Pre-Processing<a class="headerlink" href="#exploring-metadata-and-pre-processing" title="Permalink to this headline">¶</a></h1>
<p><strong>Description of methods in this notebook:</strong>
This <a class="reference external" href="https://docs.constellate.org/key-terms/#jupyter-notebook">notebook</a> shows how to explore and pre-process the <a class="reference external" href="https://docs.constellate.org/key-terms/#metadata">metadata</a> of a <a class="reference external" href="https://docs.constellate.org/key-terms/#dataset">dataset</a> using <a class="reference external" href="https://docs.constellate.org/key-terms/#pandas">Pandas</a>.</p>
<p>The following processes are described:</p>
<ul class="simple">
<li><p>Importing a <a class="reference external" href="https://docs.constellate.org/key-terms/#csv-file">CSV file</a> containing the <a class="reference external" href="https://docs.constellate.org/key-terms/#metadata">metadata</a> for a given dataset ID</p></li>
<li><p>Creating a <a class="reference external" href="https://docs.constellate.org/key-terms/#pandas">Pandas</a> dataframe to view the <a class="reference external" href="https://docs.constellate.org/key-terms/#metadata">metadata</a></p></li>
<li><p>Pre-processing your <a class="reference external" href="https://docs.constellate.org/key-terms/#dataset">dataset</a> by filtering out unwanted texts</p></li>
<li><p>Exporting a list of relevant IDs to a <a class="reference external" href="https://docs.constellate.org/key-terms/#csv-file">CSV file</a></p></li>
<li><p>Visualizing the metadata of your pre-processed <a class="reference external" href="https://docs.constellate.org/key-terms/#dataset">dataset</a> by the number of documents/year and pages/year</p></li>
</ul>
<p><strong>Use Case:</strong> For Learners (Detailed explanation, not ideal for researchers)</p>
<p><a class="reference internal" href="exploring-metadata-for-research.html"><span class="doc std std-doc">Take me to the <strong>Research Version</strong> of this notebook -&gt;</span></a></p>
<p><strong>Difficulty:</strong> Intermediate</p>
<p><strong>Completion time:</strong> 45 minutes</p>
<p><strong>Knowledge Required:</strong></p>
<ul class="simple">
<li><p>Python Basics Series (<a class="reference internal" href="python-basics-1.html"><span class="doc std std-doc">Start Python Basics I</span></a>)</p></li>
</ul>
<p><strong>Knowledge Recommended:</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="pandas-1.html"><span class="doc std std-doc">Pandas I</span></a></p></li>
</ul>
<p><strong>Data Format:</strong> <a class="reference external" href="https://docs.constellate.org/key-terms/#csv-file">CSV file</a></p>
<p><strong>Libraries Used:</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.constellate.org/key-terms/#tdm-client">tdm_client</a> to retrieve the <a class="reference external" href="https://docs.constellate.org/key-terms/#metadata">metadata</a> in a <a class="reference external" href="https://docs.constellate.org/key-terms/#csv-file">CSV file</a></p></li>
<li><p><a class="reference external" href="https://docs.constellate.org/key-terms/#pandas">Pandas</a> to manipulate and visualize the metadata</p></li>
</ul>
<p><strong>Research Pipeline:</strong> None</p>
<hr class="docutils" />
<div class="section" id="import-your-dataset">
<h2>Import your dataset<a class="headerlink" href="#import-your-dataset" title="Permalink to this headline">¶</a></h2>
<p>We’ll use the <code class="docutils literal notranslate"><span class="pre">tdm_client</span></code> library to automatically retrieve the <a class="reference external" href="https://docs.constellate.org/key-terms/#metadata">metadata</a> for a <a class="reference external" href="https://docs.constellate.org/key-terms/#dataset">dataset</a>. We can retrieve <a class="reference external" href="https://docs.constellate.org/key-terms/#metadata">metadata</a> in a <a class="reference external" href="https://docs.constellate.org/key-terms/#csv-file">CSV file</a> using the <code class="docutils literal notranslate"><span class="pre">get_metadata</span></code> method.</p>
<p>Enter a <a class="reference external" href="https://docs.constellate.org/key-terms/#dataset-ID">dataset ID</a> in the next code cell.</p>
<p>If you don’t have a dataset ID, you can:</p>
<ul class="simple">
<li><p>Use the sample dataset ID already in the code cell</p></li>
<li><p><a class="reference external" href="https://constellate.org/builder">Create a new dataset</a></p></li>
<li><p><a class="reference external" href="https://constellate.org/dataset/dashboard">Use a dataset ID from other pre-built sample datasets</a></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creating a variable `dataset_id` to hold our dataset ID</span>
<span class="c1"># The default dataset is Shakespeare Quarterly, 1950-present</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="s2">&quot;7e41317e-740f-e86a-4729-20dab492e925&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>Next, import the <code class="docutils literal notranslate"><span class="pre">tdm_client</span></code>, passing the <code class="docutils literal notranslate"><span class="pre">dataset_id</span></code> as an argument using the <code class="docutils literal notranslate"><span class="pre">get_metadata</span></code> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import the `tdm_client`</span>
<span class="kn">import</span> <span class="nn">tdm_client</span>

<span class="c1"># Pull in our dataset CSV using</span>
<span class="c1"># The .get_metadata() method downloads the CSV file for our metadata</span>
<span class="c1"># to the /data folder and returns a string for the file name and location</span>
<span class="c1"># dataset_metadata will be a string containing that file name and location</span>
<span class="n">dataset_metadata</span> <span class="o">=</span> <span class="n">tdm_client</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We are ready to import pandas for our analysis and create a dataframe. We will use the <code class="docutils literal notranslate"><span class="pre">read_csv()</span></code> method to create our dataframe from the CSV file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import pandas </span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># Create our dataframe</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">dataset_metadata</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can confirm the size of our dataset using the <code class="docutils literal notranslate"><span class="pre">len()</span></code> function on our dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">original_document_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Total original documents: </span><span class="si">{</span><span class="n">original_document_count</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now let’s take a look at the data in our dataframe <code class="docutils literal notranslate"><span class="pre">df</span></code>. We will set pandas to show all columns using <code class="docutils literal notranslate"><span class="pre">set_option()</span></code> then get a preview using <code class="docutils literal notranslate"><span class="pre">head()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the pandas option to show all columns</span>
<span class="c1"># Setting None gives us all columns</span>
<span class="c1"># To show less columns replace None with an integer</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s2">&quot;max_columns&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> 

<span class="c1"># Show the first five rows of our dataframe</span>
<span class="c1"># To show a different number of preview rows</span>
<span class="c1"># Pass an integer into the .head()</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span> 
</pre></div>
</div>
</div>
</div>
<p>Here are descriptions for the metadata types found in each column:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Column Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>a unique item ID (In JSTOR, this is a stable URL)</p></td>
</tr>
<tr class="row-odd"><td><p>title</p></td>
<td><p>the title for the item</p></td>
</tr>
<tr class="row-even"><td><p>isPartOf</p></td>
<td><p>the larger work that holds this title (for example, a journal title)</p></td>
</tr>
<tr class="row-odd"><td><p>publicationYear</p></td>
<td><p>the year of publication</p></td>
</tr>
<tr class="row-even"><td><p>doi</p></td>
<td><p>the digital object identifier for an item</p></td>
</tr>
<tr class="row-odd"><td><p>docType</p></td>
<td><p>the type of document (for example, article or book)</p></td>
</tr>
<tr class="row-even"><td><p>provider</p></td>
<td><p>the source or provider of the dataset</p></td>
</tr>
<tr class="row-odd"><td><p>datePublished</p></td>
<td><p>the publication date in yyyy-mm-dd format</p></td>
</tr>
<tr class="row-even"><td><p>issueNumber</p></td>
<td><p>the issue number for a journal publication</p></td>
</tr>
<tr class="row-odd"><td><p>volumeNumber</p></td>
<td><p>the volume number for a journal publication</p></td>
</tr>
<tr class="row-even"><td><p>url</p></td>
<td><p>a URL for the item and/or the item’s metadata</p></td>
</tr>
<tr class="row-odd"><td><p>creator</p></td>
<td><p>the author or authors of the item</p></td>
</tr>
<tr class="row-even"><td><p>publisher</p></td>
<td><p>the publisher for the item</p></td>
</tr>
<tr class="row-odd"><td><p>language</p></td>
<td><p>the language or languages of the item (eng is the ISO 639 code for English)</p></td>
</tr>
<tr class="row-even"><td><p>pageStart</p></td>
<td><p>the first page number of the print version</p></td>
</tr>
<tr class="row-odd"><td><p>pageEnd</p></td>
<td><p>the last page number of the print version</p></td>
</tr>
<tr class="row-even"><td><p>placeOfPublication</p></td>
<td><p>the city of the publisher</p></td>
</tr>
<tr class="row-odd"><td><p>wordCount</p></td>
<td><p>the number of words in the item</p></td>
</tr>
<tr class="row-even"><td><p>pageCount</p></td>
<td><p>the number of print pages in the item</p></td>
</tr>
<tr class="row-odd"><td><p>outputFormat</p></td>
<td><p>what data is available (<a class="reference external" href="https://docs.constellate.org/key-terms/#unigram">unigrams</a>, <a class="reference external" href="https://docs.constellate.org/key-terms/#bigram">bigrams</a>, <a class="reference external" href="https://docs.constellate.org/key-terms/#trigram">trigrams</a>, and/or full-text)</p></td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="filtering-out-columns-using-pandas">
<h2>Filtering out columns using Pandas<a class="headerlink" href="#filtering-out-columns-using-pandas" title="Permalink to this headline">¶</a></h2>
<p>If there are any columns you would like to drop from your analysis, you can drop them with:</p>
<p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">df.drop(['column_name1',</span> <span class="pre">'column_name2',</span> <span class="pre">...],</span> <span class="pre">axis=1)</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Drop each of these named columns</span>
<span class="c1"># axis=1 specifies we are dropping columns</span>
<span class="c1"># axis=0 would specify to drop rows</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;outputFormat&#39;</span><span class="p">,</span> <span class="s1">&#39;pageEnd&#39;</span><span class="p">,</span> <span class="s1">&#39;pageStart&#39;</span><span class="p">,</span> <span class="s1">&#39;datePublished&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Show the first five rows of our updated dataframe</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="filtering-out-rows-with-pandas">
<h2>Filtering out rows with Pandas<a class="headerlink" href="#filtering-out-rows-with-pandas" title="Permalink to this headline">¶</a></h2>
<p>Now that we have filtered out unwanted metadata columns, we can begin filtering out any texts that may not match our research interests. Let’s examine the first and last ten rows of the dataframe to see if we can identify texts that we would like to remove. We are looking for patterns in the metadata that could help us remove many texts at once.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Preview the first ten items in the dataframe</span>
<span class="c1"># Can you identify patterns to select rows to remove?</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Preview the last ten items in the dataframe</span>
<span class="c1"># Can you identify patterns to select rows to remove?</span>
<span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="remove-all-rows-without-data-for-a-particular-column">
<h3>Remove all rows without data for a particular column<a class="headerlink" href="#remove-all-rows-without-data-for-a-particular-column" title="Permalink to this headline">¶</a></h3>
<p>For example, we may wish to remove any texts that do not have authors. (In the case of journals, this may be helpful for removing paratextual sections such as the table of contents, indices, etc.) The column of interest in this case is <code class="docutils literal notranslate"><span class="pre">creator</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Remove all texts without an author</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;creator&#39;</span><span class="p">])</span> <span class="c1">#drop each row that has no value under &#39;creators&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print the total original documents followed by the current number</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Total original documents: </span><span class="si">{</span><span class="n">original_document_count</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Total current documents: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="remove-row-based-on-the-content-of-a-particular-column">
<h3>Remove row based on the content of a particular column<a class="headerlink" href="#remove-row-based-on-the-content-of-a-particular-column" title="Permalink to this headline">¶</a></h3>
<p>We can also remove texts, depending on whether we do (or do not) want a particular value in a column. Here are a few examples.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Remove all items with a particular title</span>
<span class="c1"># Change title to desired column</span>
<span class="c1"># Change `Review Article` to your undesired title</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">title</span> <span class="o">!=</span> <span class="s1">&#39;Review Article&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total current documents &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Keep only items with a particular language</span>
<span class="c1"># Change language to desired column</span>
<span class="c1"># Change &#39;eng&#39; to your desired language</span>

<span class="n">df</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">language</span> <span class="o">==</span> <span class="s1">&#39;eng&#39;</span><span class="p">])</span> <span class="c1"># Change to another language code for other languages</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total current documents &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Remove all items with less than 3000 words</span>
<span class="c1"># Change wordCount to desired column</span>
<span class="c1"># Change &#39;&gt; 3000&#39; to your desired expression to evaluate</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">wordCount</span> <span class="o">&gt;</span> <span class="mi">1500</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total current documents &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print the total original documents followed by the current number</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total original documents:&#39;</span><span class="p">,</span> <span class="n">original_document_count</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total current documents: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>Take a final look at your dataframe to make sure the current texts fit your research goals. In the next step, we will save the IDs of your pre-processed dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Preview the first 50 rows of your dataset</span>
<span class="c1"># If all the items look good, move to the next step.</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="saving-a-list-of-ids-to-a-csv-file">
<h2>Saving a list of IDs to a CSV file<a class="headerlink" href="#saving-a-list-of-ids-to-a-csv-file" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write the column &quot;id&quot; to a CSV file called `pre-processed_###.csv` where ### is the `dataset_id`</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;data/pre-processed_&#39;</span> <span class="o">+</span> <span class="n">dataset_id</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Download the “pre-processed_###.csv” file (where ### is the <code class="docutils literal notranslate"><span class="pre">dataset_id</span></code>) for future analysis. You can use this file in combination with the dataset ID to automatically filter your texts and reduce the processing time of your analyses.</p>
</div>
<hr class="docutils" />
<div class="section" id="visualizing-the-pre-processed-data">
<h2>Visualizing the Pre-Processed Data<a class="headerlink" href="#visualizing-the-pre-processed-data" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># For displaying plots</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Group the data by publication year and the aggregated number of ids into a bar chart</span>
<span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;publicationYear&#39;</span><span class="p">])[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Documents by year&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">);</span> 

<span class="c1"># Read more about Pandas dataframe plotting here: </span>
<span class="c1"># https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.plot.html</span>
</pre></div>
</div>
</div>
</div>
<p>And now let’s look at the total page numbers by year.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Group the data by publication year and aggregated sum of the page counts into a bar chart</span>

<span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;publicationYear&#39;</span><span class="p">])[</span><span class="s1">&#39;pageCount&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Pages by decade&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Nathan Kelber and Ted Lawless<br/>
        
          <div class="extra_footer">
            <div>
<a href="https://creativecommons.org/licenses/by/2.0/"><img class="license" alt="Creative Commons License" src="https://ithaka-labs.s3.amazonaws.com/static-files/images/tdm/tdmdocs/CC_BY.png" /></a> The tutorials and workshop materials are licensed under a <a href="https://creativecommons.org/licenses/by/2.0/">Creative Commons BY License</a>.
</div>

          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-125778965-3', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>

  </body>
</html>